description: >-
  An Action represents a state transition, accompanied by an optional comment, on a reviewable object.
  Actions are used to track moderation and request decisions on resources like Preprints, Registrations,
  Node Requests, Schema Responses, and Collection Submissions.

  Each Action records who performed the action (the creator), the state change (`from_state` â†’ `to_state`),
  and the `trigger` event that initiated the change. Optional comments may provide additional context.

  Actions are typically created when moderators or administrators perform moderation or review workflows.
  Some actions can be triggered automatically (`auto: true`), such as system transitions.

type: object
required:
  - id
  - type
  - attributes
  - relationships
properties:
  id:
    type: string
    description: The unique identifier of the action.
    example: abc123

  type:
    type: string
    enum: [review-actions, node-request-actions, preprint-request-actions, registration-actions, schema-response-actions, collection-submission-actions]
    description: The type of action resource.
    example: review-actions

  attributes:
    type: object
    required:
      - trigger
      - from_state
      - to_state
      - date_created
      - date_modified
    properties:
      trigger:
        type: string
        description: >-
          The trigger that initiated the action.
          Triggers correspond to state changes in the workflow and may include submit, accept, reject, withdraw, etc.
        example: accept

      comment:
        type: string
        description: >-
          Optional comment explaining the rationale for the action or providing additional details.
        example: "This submission looks good to me."

      from_state:
        type: string
        description: >-
          The state of the resource before the action was performed.
          This reflects the resource's state prior to the trigger being executed.
        example: pending

      to_state:
        type: string
        description: >-
          The state of the resource after the action was performed.
          This reflects the resource's updated state as a result of the trigger.
        example: accepted

      date_created:
        type: string
        format: date-time
        description: The date and time when the action was created.
        example: '2024-01-01T00:00:00Z'

      date_modified:
        type: string
        format: date-time
        description: The date and time when the action was last modified.
        example: '2024-01-01T01:00:00Z'

      auto:
        type: boolean
        description: >-
          Indicates whether the action was automatically generated by the system (true),
          or manually triggered by a user (false).
        example: false

      visible:
        type: boolean
        description: >-
          Indicates whether the action is visible to non-admin users (true) or only visible to admins and moderators (false).
          Visibility typically depends on the provider's review workflow and moderation settings.
        example: true

  relationships:
    type: object
    required:
      - creator
      - target
    properties:
      creator:
        description: The user who performed the action.
        type: object
        properties:
          links:
            type: object
            properties:
              related:
                type: object
                properties:
                  href:
                    type: string
                    format: uri
                    example: 'https://api.osf.io/v2/users/user456/'
                  meta:
                    type: object
                    example: {}
          data:
            type: object
            properties:
              id:
                type: string
                example: user456
              type:
                type: string
                example: users

      target:
        description: The resource (preprint, registration, node request, etc.) on which the action was performed.
        type: object
        properties:
          links:
            type: object
            properties:
              related:
                type: object
                properties:
                  href:
                    type: string
                    format: uri
                    example: 'https://api.osf.io/v2/preprints/preprint789/'
                  meta:
                    type: object
                    example: {}
          data:
            type: object
            properties:
              id:
                type: string
                example: preprint789
              type:
                type: string
                example: preprints

      provider:
        description: >-
          The provider responsible for managing the review or moderation workflow for the target resource.
        type: object
        properties:
          links:
            type: object
            properties:
              related:
                type: object
                properties:
                  href:
                    type: string
                    format: uri
                    example: 'https://api.osf.io/v2/providers/osf/'
                  meta:
                    type: object
                    example: {}
          data:
            type: object
            properties:
              id:
                type: string
                example: osf
              type:
                type: string
                example: providers

  links:
    type: object
    properties:
      self:
        type: string
        format: uri
        description: The canonical API endpoint for this action.
        example: 'https://api.osf.io/v2/actions/abc123/'
